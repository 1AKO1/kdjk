(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/HM-chat/HM-chat"],{"16a5":function(t,i,e){"use strict";(function(t){e("aeaa"),e("921b");g(e("66fd"));var i=g(e("76c4"));function g(t){return t&&t.__esModule?t:{default:t}}t(i.default)}).call(this,e("6e42")["createPage"])},"16db":function(t,i,e){},"3c78":function(t,i,e){"use strict";var g=function(){var t=this,i=t.$createElement;t._self._c},s=[];e.d(i,"a",function(){return g}),e.d(i,"b",function(){return s})},"5dd2":function(t,i,e){"use strict";var g=e("16db"),s=e.n(g);s.a},"76c4":function(t,i,e){"use strict";e.r(i);var g=e("3c78"),s=e("c998");for(var a in s)"default"!==a&&function(t){e.d(i,t,function(){return s[t]})}(a);e("5dd2");var n=e("2877"),f=Object(n["a"])(s["default"],g["a"],g["b"],!1,null,null,null);i["default"]=f.exports},c998:function(t,i,e){"use strict";e.r(i);var g=e("cf37"),s=e.n(g);for(var a in g)"default"!==a&&function(t){e.d(i,t,function(){return g[t]})}(a);i["default"]=s.a},cf37:function(t,i,e){"use strict";(function(t,e){Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var g={data:function(){return{textMsg:"",responseMsg:"",isHistoryLoading:!1,scrollAnimation:!1,scrollTop:0,scrollToView:"",msgList:[],msgImgList:[],myuid:0,msgImgURL:"../../static/imgs/nvdoctor.jpg",msgName:"",RECORDER:t.getRecorderManager(),isVoice:!1,voiceTis:"按住 说话",recordTis:"手指上滑 取消发送",recording:!1,willStop:!1,initPoint:{identifier:0,Y:0},recordTimer:null,recordLength:0,AUDIO:t.createInnerAudioContext(),playMsgid:null,VoiceTimer:null,popupLayerClass:"",hideMore:!0,hideEmoji:!0,emojiList:[[{url:"../../static/imgs/emoji/100.gif",alt:"[微笑]"},{url:"101.gif",alt:"[伤心]"},{url:"102.gif",alt:"[美女]"},{url:"103.gif",alt:"[发呆]"},{url:"104.gif",alt:"[墨镜]"},{url:"105.gif",alt:"[哭]"},{url:"106.gif",alt:"[羞]"},{url:"107.gif",alt:"[哑]"},{url:"108.gif",alt:"[睡]"},{url:"109.gif",alt:"[哭]"},{url:"110.gif",alt:"[囧]"},{url:"111.gif",alt:"[怒]"},{url:"112.gif",alt:"[调皮]"},{url:"113.gif",alt:"[笑]"},{url:"114.gif",alt:"[惊讶]"},{url:"115.gif",alt:"[难过]"},{url:"116.gif",alt:"[酷]"},{url:"117.gif",alt:"[汗]"},{url:"118.gif",alt:"[抓狂]"},{url:"119.gif",alt:"[吐]"},{url:"120.gif",alt:"[笑]"},{url:"121.gif",alt:"[快乐]"},{url:"122.gif",alt:"[奇]"},{url:"123.gif",alt:"[傲]"}],[{url:"124.gif",alt:"[饿]"},{url:"125.gif",alt:"[累]"},{url:"126.gif",alt:"[吓]"},{url:"127.gif",alt:"[汗]"},{url:"128.gif",alt:"[高兴]"},{url:"129.gif",alt:"[闲]"},{url:"130.gif",alt:"[努力]"},{url:"131.gif",alt:"[骂]"},{url:"132.gif",alt:"[疑问]"},{url:"133.gif",alt:"[秘密]"},{url:"134.gif",alt:"[乱]"},{url:"135.gif",alt:"[疯]"},{url:"136.gif",alt:"[哀]"},{url:"137.gif",alt:"[鬼]"},{url:"138.gif",alt:"[打击]"},{url:"139.gif",alt:"[bye]"},{url:"140.gif",alt:"[汗]"},{url:"141.gif",alt:"[抠]"},{url:"142.gif",alt:"[鼓掌]"},{url:"143.gif",alt:"[糟糕]"},{url:"144.gif",alt:"[恶搞]"},{url:"145.gif",alt:"[什么]"},{url:"146.gif",alt:"[什么]"},{url:"147.gif",alt:"[累]"}],[{url:"148.gif",alt:"[看]"},{url:"149.gif",alt:"[难过]"},{url:"150.gif",alt:"[难过]"},{url:"151.gif",alt:"[坏]"},{url:"152.gif",alt:"[亲]"},{url:"153.gif",alt:"[吓]"},{url:"154.gif",alt:"[可怜]"},{url:"155.gif",alt:"[刀]"},{url:"156.gif",alt:"[水果]"},{url:"157.gif",alt:"[酒]"},{url:"158.gif",alt:"[篮球]"},{url:"159.gif",alt:"[乒乓]"},{url:"160.gif",alt:"[咖啡]"},{url:"161.gif",alt:"[美食]"},{url:"162.gif",alt:"[动物]"},{url:"163.gif",alt:"[鲜花]"},{url:"164.gif",alt:"[枯]"},{url:"165.gif",alt:"[唇]"},{url:"166.gif",alt:"[爱]"},{url:"167.gif",alt:"[分手]"},{url:"168.gif",alt:"[生日]"},{url:"169.gif",alt:"[电]"},{url:"170.gif",alt:"[炸弹]"},{url:"171.gif",alt:"[刀子]"}],[{url:"172.gif",alt:"[足球]"},{url:"173.gif",alt:"[瓢虫]"},{url:"174.gif",alt:"[翔]"},{url:"175.gif",alt:"[月亮]"},{url:"176.gif",alt:"[太阳]"},{url:"177.gif",alt:"[礼物]"},{url:"178.gif",alt:"[抱抱]"},{url:"179.gif",alt:"[拇指]"},{url:"180.gif",alt:"[贬低]"},{url:"181.gif",alt:"[握手]"},{url:"182.gif",alt:"[剪刀手]"},{url:"183.gif",alt:"[抱拳]"},{url:"184.gif",alt:"[勾引]"},{url:"185.gif",alt:"[拳头]"},{url:"186.gif",alt:"[小拇指]"},{url:"187.gif",alt:"[拇指八]"},{url:"188.gif",alt:"[食指]"},{url:"189.gif",alt:"[ok]"},{url:"190.gif",alt:"[情侣]"},{url:"191.gif",alt:"[爱心]"},{url:"192.gif",alt:"[蹦哒]"},{url:"193.gif",alt:"[颤抖]"},{url:"194.gif",alt:"[怄气]"},{url:"195.gif",alt:"[跳舞]"}],[{url:"196.gif",alt:"[发呆]"},{url:"197.gif",alt:"[背着]"},{url:"198.gif",alt:"[伸手]"},{url:"199.gif",alt:"[耍帅]"},{url:"200.png",alt:"[微笑]"},{url:"201.png",alt:"[生病]"},{url:"202.png",alt:"[哭泣]"},{url:"203.png",alt:"[吐舌]"},{url:"204.png",alt:"[迷糊]"},{url:"205.png",alt:"[瞪眼]"},{url:"206.png",alt:"[恐怖]"},{url:"207.png",alt:"[忧愁]"},{url:"208.png",alt:"[眨眉]"},{url:"209.png",alt:"[闭眼]"},{url:"210.png",alt:"[鄙视]"},{url:"211.png",alt:"[阴暗]"},{url:"212.png",alt:"[小鬼]"},{url:"213.png",alt:"[礼物]"},{url:"214.png",alt:"[拜佛]"},{url:"215.png",alt:"[力量]"},{url:"216.png",alt:"[金钱]"},{url:"217.png",alt:"[蛋糕]"},{url:"218.png",alt:"[彩带]"},{url:"219.png",alt:"[礼物]"}]],onlineEmoji:{"100.gif":"AbNQgA.gif","101.gif":"AbN3ut.gif","102.gif":"AbNM3d.gif","103.gif":"AbN8DP.gif","104.gif":"AbNljI.gif","105.gif":"AbNtUS.gif","106.gif":"AbNGHf.gif","107.gif":"AbNYE8.gif","108.gif":"AbNaCQ.gif","109.gif":"AbNN4g.gif","110.gif":"AbN0vn.gif","111.gif":"AbNd3j.gif","112.gif":"AbNsbV.gif","113.gif":"AbNwgs.gif","114.gif":"AbNrD0.gif","115.gif":"AbNDuq.gif","116.gif":"AbNg5F.gif","117.gif":"AbN6ET.gif","118.gif":"AbNcUU.gif","119.gif":"AbNRC4.gif","120.gif":"AbNhvR.gif","121.gif":"AbNf29.gif","122.gif":"AbNW8J.gif","123.gif":"AbNob6.gif","124.gif":"AbN5K1.gif","125.gif":"AbNHUO.gif","126.gif":"AbNIDx.gif","127.gif":"AbN7VK.gif","128.gif":"AbNb5D.gif","129.gif":"AbNX2d.gif","130.gif":"AbNLPe.gif","131.gif":"AbNjxA.gif","132.gif":"AbNO8H.gif","133.gif":"AbNxKI.gif","134.gif":"AbNzrt.gif","135.gif":"AbU9Vf.gif","136.gif":"AbUSqP.gif","137.gif":"AbUCa8.gif","138.gif":"AbUkGQ.gif","139.gif":"AbUFPg.gif","140.gif":"AbUPIS.gif","141.gif":"AbUZMn.gif","142.gif":"AbUExs.gif","143.gif":"AbUA2j.gif","144.gif":"AbUMIU.gif","145.gif":"AbUerq.gif","146.gif":"AbUKaT.gif","147.gif":"AbUmq0.gif","148.gif":"AbUuZV.gif","149.gif":"AbUliF.gif","150.gif":"AbU1G4.gif","151.gif":"AbU8z9.gif","152.gif":"AbU3RJ.gif","153.gif":"AbUYs1.gif","154.gif":"AbUJMR.gif","155.gif":"AbUadK.gif","156.gif":"AbUtqx.gif","157.gif":"AbUUZ6.gif","158.gif":"AbUBJe.gif","159.gif":"AbUdIO.gif","160.gif":"AbU0iD.gif","161.gif":"AbUrzd.gif","162.gif":"AbUDRH.gif","163.gif":"AbUyQA.gif","164.gif":"AbUWo8.gif","165.gif":"AbU6sI.gif","166.gif":"AbU2eP.gif","167.gif":"AbUcLt.gif","168.gif":"AbU4Jg.gif","169.gif":"AbURdf.gif","170.gif":"AbUhFS.gif","171.gif":"AbU5WQ.gif","172.gif":"AbULwV.gif","173.gif":"AbUIzj.gif","174.gif":"AbUTQs.gif","175.gif":"AbU7yn.gif","176.gif":"AbUqe0.gif","177.gif":"AbUHLq.gif","178.gif":"AbUOoT.gif","179.gif":"AbUvYF.gif","180.gif":"AbUjFU.gif","181.gif":"AbaSSJ.gif","182.gif":"AbUxW4.gif","183.gif":"AbaCO1.gif","184.gif":"Abapl9.gif","185.gif":"Aba9yR.gif","186.gif":"AbaFw6.gif","187.gif":"Abaiex.gif","188.gif":"AbakTK.gif","189.gif":"AbaZfe.png","190.gif":"AbaEFO.gif","191.gif":"AbaVYD.gif","192.gif":"AbamSH.gif","193.gif":"AbaKOI.gif","194.gif":"Abanld.gif","195.gif":"Abau6A.gif","196.gif":"AbaQmt.gif","197.gif":"Abal0P.gif","198.gif":"AbatpQ.gif","199.gif":"Aba1Tf.gif","200.png":"Aba8k8.png","201.png":"AbaGtS.png","202.png":"AbaJfg.png","203.png":"AbaNlj.png","204.png":"Abawmq.png","205.png":"AbaU6s.png","206.png":"AbaaXn.png","207.png":"Aba000.png","208.png":"AbarkT.png","209.png":"AbastU.png","210.png":"AbaB7V.png","211.png":"Abafn1.png","212.png":"Abacp4.png","213.png":"AbayhF.png","214.png":"Abag1J.png","215.png":"Aba2c9.png","216.png":"AbaRXR.png","217.png":"Aba476.png","218.png":"Abah0x.png","219.png":"Abdg58.png"},windowsState:"",redenvelopeData:{rid:null,from:null,face:null,blessing:null,money:null}}},onLoad:function(i){var g=this;t.setNavigationBarTitle({title:i.name}),this.msgImgURL=i.imgurl,this.msgName=i.name,console.log(e(i.imgurl," at pages\\HM-chat\\HM-chat.vue:256")),console.log(e(this.msgImgURL," at pages\\HM-chat\\HM-chat.vue:257")),this.getMsgList(),this.AUDIO.onEnded(function(t){g.playMsgid=null}),this.RECORDER.onStart(function(t){g.recordBegin(t)}),this.RECORDER.onStop(function(t){g.recordEnd(t)})},onShow:function(){var i=this;this.scrollTop=9999999,t.getStorage({key:"redEnvelopeData",success:function(g){console.log(e(g.data," at pages\\HM-chat\\HM-chat.vue:282"));var s=new Date,a=i.msgList[i.msgList.length-1].msg.id;a++;var n={type:"user",msg:{id:a,type:"redEnvelope",time:s.getHours()+":"+s.getMinutes(),userinfo:{uid:0,username:"大黑哥",face:"/static/img/face.jpg"},content:{blessing:g.data.blessing,rid:Math.floor(1e3*Math.random()+1),isReceived:!1}}};i.screenMsg(n),t.removeStorage({key:"redEnvelopeData"})}})},methods:{screenMsg:function(i){if("system"==i.type)switch(i.msg.type){case"text":this.addSystemTextMsg(i);break;case"redEnvelope":this.addSystemRedEnvelopeMsg(i);break}else if("user"==i.type){switch(i.msg.type){case"text":this.addTextMsg(i);break;case"voice":this.addVoiceMsg(i);break;case"img":this.addImgMsg(i);break;case"redEnvelope":this.addRedEnvelopeMsg(i);break}console.log(e("用户消息"," at pages\\HM-chat\\HM-chat.vue:322")),i.msg.userinfo.uid!=this.myuid&&(console.log(e("振动"," at pages\\HM-chat\\HM-chat.vue:325")),t.vibrateLong())}this.$nextTick(function(){this.scrollToView="msg"+i.msg.id})},loadHistory:function(t){var i=this;if(!this.isHistoryLoading){this.isHistoryLoading=!0,this.scrollAnimation=!1;var e=this.msgList[0].msg.id;setTimeout(function(){for(var t=[{type:"user",msg:{id:2,type:"text",time:"15:20",userinfo:{uid:1,username:"口袋助手",face:"../../static/img/im/face/face_2.jpg"},content:{text:"您好，这里是口袋助手，很高兴有机会能为您的健康保驾护航！您有任何问题，皆可以在这里反馈，我们将会给您提供帮助。"}}},{type:"user",msg:{id:1,type:"text",time:"15:22",userinfo:{uid:0,username:"大黑哥",face:"/static/img/face.jpg"},content:{text:"你好，我最近总是头痛，伴随轻度耳鸣。"}}},{type:"user",msg:{id:2,type:"text",time:"15:23",userinfo:{uid:1,username:"口袋助手",face:"/static/img/im/face/face_2.jpg"},content:{text:"请问您最近的睡眠状况如何？"}}},{type:"user",msg:{id:2,type:"text",time:"15:20",userinfo:{uid:1,username:"口袋助手",face:"../../static/img/im/face/face_2.jpg"},content:{text:"您好，这里是口袋助手，很高兴有机会能为您的健康保驾护航！您有任何问题，皆可以在这里反馈，我们将会给您提供帮助。"}}},{type:"user",msg:{id:1,type:"text",time:"15:22",userinfo:{uid:0,username:"大黑哥",face:"/static/img/face.jpg"},content:{text:"你好，我最近总是头痛，伴随轻度耳鸣。"}}},{type:"user",msg:{id:2,type:"text",time:"15:23",userinfo:{uid:1,username:"口袋助手",face:"/static/img/im/face/face_2.jpg"},content:{text:"请问您最近的睡眠状况如何？"}}},{type:"user",msg:{id:2,type:"text",time:"15:20",userinfo:{uid:1,username:"口袋助手",face:"../../static/img/im/face/face_2.jpg"},content:{text:"您好，这里是口袋助手，很高兴有机会能为您的健康保驾护航！您有任何问题，皆可以在这里反馈，我们将会给您提供帮助。"}}},{type:"user",msg:{id:1,type:"text",time:"15:22",userinfo:{uid:0,username:"大黑哥",face:"/static/img/face.jpg"},content:{text:"你好，我最近总是头痛，伴随轻度耳鸣。"}}},{type:"user",msg:{id:2,type:"text",time:"15:23",userinfo:{uid:1,username:"口袋助手",face:"/static/img/im/face/face_2.jpg"},content:{text:"请问您最近的睡眠状况如何？"}}},{type:"user",msg:{id:2,type:"text",time:"15:20",userinfo:{uid:1,username:"口袋助手",face:"../../static/img/im/face/face_2.jpg"},content:{text:"您好，这里是口袋助手，很高兴有机会能为您的健康保驾护航！您有任何问题，皆可以在这里反馈，我们将会给您提供帮助。"}}},{type:"user",msg:{id:1,type:"text",time:"15:22",userinfo:{uid:0,username:"大黑哥",face:"/static/img/face.jpg"},content:{text:"你好，我最近总是头痛，伴随轻度耳鸣。"}}},{type:"user",msg:{id:2,type:"text",time:"15:23",userinfo:{uid:1,username:"口袋助手",face:"/static/img/im/face/face_2.jpg"},content:{text:"请问您最近的睡眠状况如何？"}}}],g=0;g<t.length;g++)"user"==t[g].type&&"img"==t[g].msg.type&&(t[g].msg.content=i.setPicSize(t[g].msg.content),i.msgImgList.unshift(t[g].msg.content.url)),t[g].msg.id=Math.floor(1e3*Math.random()+1),i.msgList.unshift(t[g]);i.$nextTick(function(){this.scrollToView="msg"+e,this.$nextTick(function(){this.scrollAnimation=!0})}),i.isHistoryLoading=!1},1e3)}},getMsgList:function(){for(var t=[{type:"system",msg:{id:0,type:"text",content:{text:"2019-12-12 15:20"}}}],i=0;i<t.length;i++)"user"==t[i].type&&"img"==t[i].msg.type&&(t[i].msg.content=this.setPicSize(t[i].msg.content),this.msgImgList.push(t[i].msg.content.url));this.msgList=t,this.$nextTick(function(){this.scrollTop=9999,this.$nextTick(function(){this.scrollAnimation=!0})})},setPicSize:function(i){var e=t.upx2px(350),g=t.upx2px(350);if(i.w>e||i.h>g){var s=i.w/i.h;i.w=s>1?e:g*s,i.h=s>1?e/s:g}return i},showMore:function(){this.isVoice=!1,this.hideEmoji=!0,this.hideMore?(this.hideMore=!1,this.openDrawer()):this.hideDrawer()},openDrawer:function(){this.popupLayerClass="showLayer"},hideDrawer:function(){var t=this;this.popupLayerClass="",setTimeout(function(){t.hideMore=!0,t.hideEmoji=!0},150)},chooseImage:function(){this.getImage("album")},camera:function(){this.getImage("camera")},handRedEnvelopes:function(){t.navigateTo({url:"HM-hand/HM-hand"}),this.hideDrawer()},getImage:function(i){var g=this;this.hideDrawer(),t.chooseImage({sourceType:[i],sizeType:["original","compressed"],success:function(i){for(var s=function(s){t.getImageInfo({src:i.tempFilePaths[s],success:function(t){console.log(e(t.width," at pages\\HM-chat\\HM-chat.vue:481")),console.log(e(t.height," at pages\\HM-chat\\HM-chat.vue:482"));var a={url:i.tempFilePaths[s],w:t.width,h:t.height};g.sendMsg(a,"img")}})},a=0;a<i.tempFilePaths.length;a++)s(a)}})},chooseEmoji:function(){this.hideMore=!0,this.hideEmoji?(this.hideEmoji=!1,this.openDrawer()):this.hideDrawer()},addEmoji:function(t){this.textMsg+=t.alt},textareaFocus:function(){"showLayer"==this.popupLayerClass&&0==this.hideMore&&this.hideDrawer()},sendText:function(){if(this.hideDrawer(),this.textMsg){var t=this.replaceEmoji(this.textMsg);console.log(e(t," at pages\\HM-chat\\HM-chat.vue:519"));var i={text:t};this.sendMsg(i,"text"),this.textMsg=""}},replaceEmoji:function(t){var i=this,g=t.replace(/\[([^(\]|\[)]*)\]/g,function(t,g){console.log(e("item: "+t," at pages\\HM-chat\\HM-chat.vue:527"));for(var s=0;s<i.emojiList.length;s++)for(var a=i.emojiList[s],n=0;n<a.length;n++){var f=a[n];if(f.alt==t){var r="https://s2.ax1x.com/2019/04/12/",l='<img src="'+r+i.onlineEmoji[f.url]+'">';return console.log(e("imgstr: "+l," at pages\\HM-chat\\HM-chat.vue:537")),l}}});return'<div style="display: flex;align-items: center;word-wrap:break-word;">'+g+"</div>"},sendMsg:function(i,g){var s=new Date,a=this,n=this.msgList[this.msgList.length-1].msg.id;n++;var f={type:"user",msg:{id:n,time:s.getHours()+":"+s.getMinutes(),type:g,userinfo:{uid:0,username:"大黑哥",face:"/static/img/face.jpg"},content:i}};this.screenMsg(f),n=this.msgList[this.msgList.length-1].msg.id,n++;var r=JSON.stringify(i),l=JSON.parse(r);console.log(e(a.textMsg," at pages\\HM-chat\\HM-chat.vue:564"));var o={type:"user",msg:{id:2,time:s.getHours()+":"+s.getMinutes(),type:g,userinfo:{uid:1,username:a.msgName,face:"/static/img/im/face/face_2.jpg"},content:l}};t.request({url:"http://kdjk.c5ppc.cn/doctor_talk",data:{question:a.textMsg,type:"word"},method:"POST",success:function(t){var i="";10010==t.data.code?i=t.data.data:1e4==t.data.code&&(i=t.data.msg),o.msg.content.text='<div style="display: flex;align-items: center;word-wrap:break-word;">'+i+"</div>",setTimeout(function(){a.screenMsg(o)},2e3)},fail:function(t){console.log(e(t," at pages\\HM-chat\\HM-chat.vue:588"))}})},sendVoiceMsg:function(i,g){var s=new Date,a=this,n=this.msgList[this.msgList.length-1].msg.id;n++;var f={type:"user",msg:{id:n,time:s.getHours()+":"+s.getMinutes(),type:g,userinfo:{uid:0,username:"大黑哥",face:"/static/img/face.jpg"},content:i}};this.screenMsg(f),n=this.msgList[this.msgList.length-1].msg.id,n++,t.uploadFile({url:"http://kdjk.c5ppc.cn/doctor_talk",filePath:i.url,name:"speech",formData:{type:"speech"},success:function(t){var i="",g=JSON.parse(t.data);1e4==g.code?i=g.msg:10010==g.code&&(i=g.data);var f={type:"user",msg:{id:n,time:s.getHours()+":"+s.getMinutes(),type:"text",userinfo:{uid:1,username:a.msgName,face:"/static/img/im/face/face_2.jpg"},content:{text:'<div style="display: flex;align-items: center;word-wrap:break-word;">'+i+"</div>"}}};setTimeout(function(){a.screenMsg(f)},2e3),console.log(e(g," at pages\\HM-chat\\HM-chat.vue:624"))},fail:function(){console.log(e("上传失败"," at pages\\HM-chat\\HM-chat.vue:628"))}})},addTextMsg:function(t){this.msgList.push(t)},addVoiceMsg:function(t){this.msgList.push(t)},addImgMsg:function(t){t.msg.content=this.setPicSize(t.msg.content),this.msgImgList.push(t.msg.content.url),this.msgList.push(t)},addRedEnvelopeMsg:function(t){this.msgList.push(t)},addSystemTextMsg:function(t){this.msgList.push(t)},addSystemRedEnvelopeMsg:function(t){this.msgList.push(t)},openRedEnvelope:function(i,g){var s=this,a=i.content.rid;t.showLoading({title:"加载中..."}),console.log(e("index: "+g," at pages\\HM-chat\\HM-chat.vue:665")),setTimeout(function(){0==a?s.redenvelopeData={rid:0,from:"大黑哥",face:"/static/img/im/face/face.jpg",blessing:"恭喜发财，大吉大利",money:"已领完"}:(s.redenvelopeData={rid:1,from:"售后客服008",face:"/static/img/im/face/face_2.jpg",blessing:"恭喜发财",money:"0.01"},i.content.isReceived||(s.sendSystemMsg({text:"你领取了"+(i.userinfo.uid==s.myuid?"自己":i.userinfo.username)+"的红包"},"redEnvelope"),console.log(e("this.msgList[index]: "+JSON.stringify(s.msgList[g])," at pages\\HM-chat\\HM-chat.vue:688")),s.msgList[g].msg.content.isReceived=!0)),t.hideLoading(),s.windowsState="show"},200)},closeRedEnvelope:function(){var t=this;this.windowsState="hide",setTimeout(function(){t.windowsState=""},200)},sendSystemMsg:function(t,i){var e=this.msgList[this.msgList.length-1].msg.id;e++;var g={type:"system",msg:{id:e,type:i,content:t}};this.screenMsg(g)},toDetails:function(i){t.navigateTo({url:"HM-details/HM-details?rid="+i})},showPic:function(i){t.previewImage({indicator:"none",current:i.content.url,urls:this.msgImgList})},playVoice:function(t){this.playMsgid=t.id,this.AUDIO.src=t.content.url,this.$nextTick(function(){this.AUDIO.play()})},startRecognize:function(t){if(!(t.touches.length>1)){var i=this;i.initPoint.Y=t.touches[0].clientY,i.initPoint.identifier=t.touches[0].identifier,i.RECORDER.start({format:"mp3"});var g=null,s={engine:"iFly",userInterface:!1,continue:!0,timeout:1e4,nbest:3};g="",console.log(e("开始语音识别："," at pages\\HM-chat\\HM-chat.vue:750")),plus.speech.startRecognize(s,function(t){g+=t,console.log(e(g," at pages\\HM-chat\\HM-chat.vue:754"))},function(t){console.log(e("语音识别失败："+t.message," at pages\\HM-chat\\HM-chat.vue:756"))})}},voiceBegin:function(t){t.touches.length>1||(this.initPoint.Y=t.touches[0].clientY,this.initPoint.identifier=t.touches[0].identifier,this.RECORDER.start({format:"mp3"}))},recordBegin:function(t){var i=this;this.recording=!0,this.voiceTis="松开 结束",this.recordLength=0,this.recordTimer=setInterval(function(){i.recordLength++},1e3)},voiceCancel:function(){this.recording=!1,this.voiceTis="按住 说话",this.recordTis="手指上滑 取消发送",this.willStop=!0,this.RECORDER.stop()},voiceIng:function(i){if(this.recording){var e=i.touches[0];this.initPoint.Y-e.clientY>=t.upx2px(0)?(this.willStop=!0,this.recordTis="松开手指 取消发送"):(this.willStop=!1,this.recordTis="手指上滑 取消发送")}},voiceEnd:function(t){this.recording&&(this.recording=!1,this.voiceTis="按住 说话",this.recordTis="手指上滑 取消发送",this.RECORDER.stop())},recordEnd:function(t){if(clearInterval(this.recordTimer),this.willStop)console.log(e("取消发送录音"," at pages\\HM-chat\\HM-chat.vue:832"));else{console.log(e("e: "+JSON.stringify(t)," at pages\\HM-chat\\HM-chat.vue:816"));var i={length:0,url:t.tempFilePath},g=parseInt(this.recordLength/60),s=this.recordLength%60;g=g<10?"0"+g:g,s=s<10?"0"+s:s,i.length=g+":"+s,this.sendVoiceMsg(i,"voice"),console.log(e(i," at pages\\HM-chat\\HM-chat.vue:828"))}this.willStop=!1},switchVoice:function(){this.hideDrawer(),this.isVoice=!this.isVoice},discard:function(){}}};i.default=g}).call(this,e("6e42")["default"],e("0de9")["default"])}},[["16a5","common/runtime","common/vendor"]]]);